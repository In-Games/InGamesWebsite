<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
</head>
<body style="background-color: rgb(213, 214, 170);;">
    <div style="margin:auto; margin-top: 20%; background-color: rgb(226, 219, 190);">
        <center style="margin:auto; width: 40%; background-color: gray; border: 3px solid #73AD21; padding: 10px;">
            Email <input id="email" type="text" id="email" required>
            <br>
            Username <input id="firstname" type="text" id="firstname" required>
            <br>
            Password <input id="password" type="password" id="password" required>
            <br>
            <button onclick="register()">Submit Form</button>
            <p>Creating an InGames account is free no fees will be applied</p>
        </center>
    </div>
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-storage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>

    <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyAuHLCZsy_C23ts1yKTCTbDhH7QokkBvso",
        authDomain: "ingames-website.firebaseapp.com",
        databaseURL: "https://ingames-website.firebaseio.com",
        projectId: "ingames-website",
        storageBucket: "ingames-website.appspot.com",
        messagingSenderId: "1008846259700",
        appId: "1:1008846259700:web:c79e9fd5e401c7a360e5a1",
        measurementId: "G-XRJD3LKKJ3"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig)

    function register(){
        var today = new Date();
        var fulldate = String(today.getDate()) + "." + String(today.getMonth()) + "." String(today.getFullYear());
        var name = document.getElementById("firstname").value;
        var mail = document.getElementById("email").value;
        var password = document.getElementById("password").value;

        var ref = firebase.storage();
        var storeref = ref.ref("users/" + name + " / " + mail + ".txt");
        var file = new Blob([name + "\n" + mail + "\n" + password + "\n" + fulldate], { type: "text/plain;charset=utf-8" });
        
        
        localStorage.setItem("email", document.getElementById("email"));
        localStorage.setItem("username", document.getElementById("username"));
        localStorage.setItem("password", document.getElementById("password"));
        localStorage.setItem("date", fulldate);

        storeref.put(file).then(function() {
            alert('Your account is created');
            window.location = "https://ingames.ml";
        });
    }
    </script>
</body>
</html>
